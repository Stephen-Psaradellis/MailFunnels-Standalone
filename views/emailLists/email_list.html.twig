{% extends 'base.html.twig' %}

{% block stylesheets %}

    <!-- Bootstrap Table -->
    <link href="{{ asset('plugins/bootstrap-table/bootstrap-table.min.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-12">
            <div>
                <h4 class="text-primary m-b-0 p-b-0 text-semibold">Email Lists</h4>
                <p class="text-muted p-t-0 m-t-0">You have <b class="text-primary m-t-0">{{ emailListUserLinks | length }}</b> email lists.</p>
                <div class="clearfix"></div>
                <hr/>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body" style="min-height: 500px;">
                    <div id="table-loader" class="">
                        <div class="load1">
                            <div class="loader"></div>
                        </div>
                    </div>
                    <div id="table-container" class="invisible">
                        <div id="lists-table-toolbar" class="btn-group table-toolbar">
                            <button class="btn btn-inverse-primary btn-rounded btn-sm " data-toggle="modal" data-target="#newEmailListModal"><i class="fa fa-plus"></i> New Email List</button>
                        </div>
                        <div class="row">
                            <div class="col-12">

                                <div class="table-responsive table-borderless">
                                    <table id="email-lists-table" class="mf-table table-no-bordered"
                                           data-toggle="table"
                                           data-flat="true"
                                           data-toolbar="#lists-table-toolbar"
                                           data-url="/api_v1/lists/get"
                                           data-search="true"
                                           data-show-refresh="true"
                                           data-sort-name="name"
                                           data-page-size="5"
                                           data-pagination="true">
                                        <thead>
                                        <tr class="table-header">
                                            <th class="table-list-name" data-field="name" data-valign="middle" data-sortable="true" data-formatter="nameFormatter">Name</th>
                                            <th data-field="description" data-valign="middle" data-sortable="true" data-visible="false">Description</th>
                                            <th data-field="subscribers" data-valign="middle" data-align="center" data-sortable="true" data-formatter="statFormatter">Subscribers</th>
                                            <th data-field="unsubscribers" data-valign="middle" data-align="center" data-sortable="true" data-formatter="statFormatter">Unsubscribers</th>
                                            <th data-field="emails-sent" data-valign="middle" data-align="center" data-sortable="true" data-formatter="statFormatter">Email Sent</th>
                                            <th data-field="emails-clicked" class="text-center" data-valign="middle" data-align="center" data-sortable="true" data-formatter="statFormatter">Clicked</th>
                                            <th data-field="emails-opened" class="text-center" data-valign="middle" data-align="center" data-sortable="true" data-formatter="statFormatter">Opened</th>
                                            <th data-field="id" class="text-center" data-valign="middle" data-align="center" data-sortable="false" data-formatter="actionFormatter">Action</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
    {% block modals %}


        <!-- START NEW EMAIL LIST MODAL -->
        <!-- ~~~~~~~~~~~~~~~~~~ -->
        <div id="newEmailListModal" class="modal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-primary" id="exampleModalLabel-2">New Email List</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <form>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="email_list_name_input">Email List Name</label>
                                <input id="email_list_name_input" type="text" class="form-control" placeholder="Name">
                            </div>

                            <div class="form-group">
                                <label for="email_list_description_input">Email List Description</label>
                                <textarea id="email_list_description_input" class="form-control" rows="3"
                                          placeholder="Description for email list"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="reset" class="btn btn-primary">Reset</button>
                            <button id="new_email_list_submit_button" type="button" class="btn btn-success">Submit
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- ~~~~~~~~~~~~~~~~ -->
        <!-- END NEW EMAIL LIST MODAL -->

        <!-- START CONFIRM DELETE MODAL -->
        <!-- ~~~~~~~~~~~~~~~~~~ -->
        <div id="confirm_delete_modal" class="modal">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span>
                        </button>
                        <h4 class="modal-title" id="myModalLabel">Confirm Template Delete</h4>
                    </div>

                    <div class="modal-body">
                        <h4>Are you sure you want to delete this template?</h4>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                        <button id="confirm_delete_email_list_button" type="button" class="btn btn-success">Confirm
                        </button>
                    </div>

                </div>
            </div>
        </div>
        <!-- ~~~~~~~~~~~~~~~~ -->
        <!-- END CONFIRM DELETE MODAL -->

    {% endblock %}

{% block javascripts %}

    <!-- Bootstrap Table -->
    <script src="{{ asset('plugins/bootstrap-table/bootstrap-table.min.js') }}"></script>
    <script src="{{ asset('plugins/bootstrap-table/extensions/flat-json/bootstrap-table-flat-json.js') }}"></script>


    <script src="{{ asset('js/pages/EmailLists/email_lists.js') }}"></script>
{% endblock %}